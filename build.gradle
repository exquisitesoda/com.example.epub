plugins {
	id 'java'
}

repositories {
	mavenCentral()
}

dependencies {
	testImplementation(platform('org.junit:junit-bom:5.13.1'))
	testImplementation('org.junit.jupiter:junit-jupiter')
	testRuntimeOnly('org.junit.platform:junit-platform-launcher')
}

test {
	useJUnitPlatform()
	testLogging {
		events "passed", "skipped", "failed"
	}
	
	testLogging.showStandardStreams = true
	
	afterTest((descriptor, result) -> {
		println "[" + result + "] " + descriptor.name
	})
	
	doLast {
		
	}
}

tasks.register('view-tests') {
	dependsOn test
	doLast {
		def baseDirectory = reporting.baseDirectory.get().asFile.toPath().toString()
		def indexPath = baseDirectory + "\\tests\\test\\index.html"
		def indexFile = file(indexPath)
		browse indexFile.toPath()
	}
}

def browse(path) {
	def desktop = java.awt.Desktop.getDesktop()
	desktop.browse(path.toFile().toURI())
}